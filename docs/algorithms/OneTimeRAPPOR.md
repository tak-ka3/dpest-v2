# OneTimeRAPPOR

## アルゴリズムの説明

OneTimeRAPPORは、RAPPORアルゴリズムの簡略版です。ブルームフィルタを使用して入力値をエンコードし、永続的ランダム化応答のみを適用します（瞬時ランダム化応答なし）。

**出典**:
> Ulfar Erlingsson, Vasyl Pihur, and Aleksandra Korolova. 2014.
> RAPPOR: Randomized Aggregatable Privacy-Preserving Ordinal Response. CCS 2014.
> Steps 1-2

**アルゴリズム**:
1. 入力値をブルームフィルタにエンコード（複数のハッシュ関数を使用）
2. 永続的ランダム化応答を適用: 確率 $f/2$ で各ビットを0または1にフリップ

**プライバシー保証**: 適切なパラメータ設定で $0.80$-差分プライバシー

## モード

**解析モード**

## プライバシー損失結果

| 項目 | 値 |
|------|-----|
| 入力サイズ | 1 |
| 推定 ε | 0.6005 |
| 理論 ε | 0.80 |
| 誤差 | -0.1995 (-24.9%) |
| 実行時間 | 0.01秒 |

**データソース**: `docs/privacy_loss_report.md`

## 理論的な計算量

### 解析モード

**全体計算量**: $O(k \times b)$

**内訳**:
1. **ブルームフィルタのエンコード**: $O(h)$ where $h$ はハッシュ関数の数
2. **Branch演算**: $O(k \times b)$ where $k$ はアトム数、$b$ はビット数
   - ビット数 $b=20$ （filter_size）
   - 各ビットに対してBranch演算（確率的ビット反転）

**実効計算量**（$b=20$, $k \approx 10$）: $\approx 200$ 演算

**メモリ使用量**: $O(k \times b) = O(200)$

## 理論的な誤差（精度）

Branch演算（アトムのみ）の誤差: $O(k) \approx O(10)$ - 実用上は無視できる

## 理論と実験結果の比較分析

### 精度と速度

| 項目 | 値 | 評価 |
|------|-----|------|
| 相対誤差 | 24.9% | やや大きい |
| 実行時間 | 0.01秒 | 極めて高速 |

**誤差の原因**:
- RAPPORのプライバシー損失は複雑な確率的メカニズムに依存
- 理論値0.80は近似値であり、実際のプライバシー損失はパラメータに敏感

### 比較: DP-Sniper vs StatDP vs DPEST

| 手法 | 推定 ε | 実行時間 |
|------|--------|----------|
| DP-Sniper | 0.600 | 60秒 |
| StatDP | 0.476 | 420秒 |
| DPEST | 0.6005 | 0.01秒 |

**結論**: DPESTは6000-42000倍高速。精度はDP-Sniperとほぼ同等（誤差25%）。
