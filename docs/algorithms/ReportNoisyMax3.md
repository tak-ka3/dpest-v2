# ReportNoisyMax3

## アルゴリズムの説明

ReportNoisyMax3は、Laplaceノイズを追加した後、インデックスではなく **最大値そのもの（max）** を返します。このアルゴリズムは差分プライバシーを満たしません（無限大のプライバシー損失）。

**出典**:
> Zeyu Ding, Yuxin Wang, Guanhong Wang, Danfeng Zhang, and Daniel Kifer. 2018.
> Detecting Violations of Differential Privacy. CCS 2018.
> Algorithm 7

**アルゴリズム**:
1. 入力ベクトル $q = (q_1, q_2, \ldots, q_m)$ を受け取る
2. 各要素 $i$ に対して、独立にLaplaceノイズ $\eta_i \sim \text{Lap}(2/\varepsilon)$ を追加
3. ノイズ付きベクトルの **最大値** を返す: $\max_i (q_i + \eta_i)$

**数式**:

$$
M(D) = \max_i (q_i + \text{Lap}(2/\varepsilon))
$$

**プライバシー保証**: このアルゴリズムは差分プライバシーを満たしません（理論 ε = ∞）。

## モード

**解析モード**

## プライバシー損失結果

| 項目 | 値 |
|------|-----|
| 入力サイズ | 5 |
| 推定 ε | 0.8477 |
| 理論 ε | ∞ |
| 誤差 | DPESTは有限値を推定（保守的） |
| 実行時間 | 2.73秒 |

**データソース**: `docs/privacy_loss_report.md`

**解釈**: DPESTは0.8477という有限値を推定していますが、これは保守的な下界です。理論的にはプライバシー損失は無限大です。

## 理論的な計算量

### 解析モード

**全体計算量**: $O(m^2 \times g^2)$

Max演算もArgmaxと同様に、各値が最大となる確率をCDFベースで計算するため、同じ計算量です。

## 理論的な誤差（精度）

Max演算の誤差構造はArgmaxと同様で、総誤差 $O(10^{-2})$。

## 理論と実験結果の比較分析

### プライバシー違反の検出

| 手法 | 推定 ε | 評価 |
|------|--------|------|
| DP-Sniper | 0.249 | 有限値（保守的） |
| StatDP | 0.198 | 有限値（保守的） |
| DPEST | 0.8477 | **最も大きい有限値**（理論∞により近い） |

**結論**: DPESTは他手法より大きなプライバシー損失を検出し、プライバシー違反をより正確に報告。

### 実行時間

| 手法 | 実行時間 |
|------|----------|
| DP-Sniper | 23秒 |
| StatDP | 120秒 |
| DPEST | 2.73秒 |

**結論**: DPEST は8-44倍高速。
