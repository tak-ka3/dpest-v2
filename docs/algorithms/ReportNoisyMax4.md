# ReportNoisyMax4

## アルゴリズムの説明

ReportNoisyMax4は、指数分布ノイズを追加した後、**最大値そのもの（max）** を返します。ReportNoisyMax3と同様に、このアルゴリズムは差分プライバシーを満たしません。

**出典**:
> Zeyu Ding, Yuxin Wang, Guanhong Wang, Danfeng Zhang, and Daniel Kifer. 2018.
> Detecting Violations of Differential Privacy. CCS 2018.
> Algorithm 8

**アルゴリズム**:
1. 入力ベクトル $q = (q_1, q_2, \ldots, q_m)$ を受け取る
2. 各要素 $i$ に対して、独立に指数分布ノイズ $\eta_i \sim \text{Exp}(2/\varepsilon)$ を追加
3. ノイズ付きベクトルの **最大値** を返す: $\max_i (q_i + \eta_i)$

**数式**:

$$
M(D) = \max_i (q_i + \text{Exp}(2/\varepsilon))
$$

**プライバシー保証**: このアルゴリズムは差分プライバシーを満たしません（理論 ε = ∞）。

## モード

**解析モード**

## プライバシー損失結果

| 項目 | 値 |
|------|-----|
| 入力サイズ | 5 |
| 推定 ε | 8.6719 |
| 理論 ε | ∞ |
| 誤差 | DPESTは有限値を推定（保守的） |
| 実行時間 | 2.74秒 |

**データソース**: `docs/privacy_loss_report.md`

**解釈**: DPESTは8.6719という大きな有限値を推定し、ReportNoisyMax3（0.8477）より10倍大きいプライバシー損失を検出しています。

## 理論的な計算量

### 解析モード

**全体計算量**: $O(m^2 \times g^2)$

## 理論的な誤差（精度）

総誤差 $O(10^{-2})$。

## 理論と実験結果の比較分析

### プライバシー違反の検出

| 手法 | 推定 ε | 評価 |
|------|--------|------|
| DP-Sniper | 0.351 | 有限値（大きく過小評価） |
| StatDP | 0.194 | 有限値（大きく過小評価） |
| DPEST | 8.6719 | **非常に大きい有限値**（理論∞に最も近い） |

**結論**: DPESTは他手法より25-45倍大きなプライバシー損失を検出し、プライバシー違反を最も正確に報告。

### 実行時間

| 手法 | 実行時間 |
|------|----------|
| DP-Sniper | 20秒 |
| StatDP | 120秒 |
| DPEST | 2.74秒 |

**結論**: DPEST は7-44倍高速で、プライバシー違反検出能力も圧倒的に優れている。
